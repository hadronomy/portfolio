---
import { Icon } from 'astro-icon/components';
import type { CollectionEntry } from 'astro:content';

type Props = {
  post: CollectionEntry<'blog'>;
  index: number;
};

const { post, index } = Astro.props;
const { data, id } = post;
const pathname = `/blog/${id}/`;
---

<a href={pathname} class="group block w-full border border-white/10 bg-white/5 hover:bg-white/10 hover:border-white/30 transition-all duration-300">
  <div class="grid grid-cols-1 md:grid-cols-[160px_1fr] gap-0">
    
    <!-- Meta Column -->
    <div class="p-6 border-b md:border-b-0 md:border-r border-white/10 flex flex-col justify-between">
      <div class="flex flex-col">
        <span class="font-mono text-[10px] text-white/40 uppercase tracking-widest mb-1">Log_ID</span>
        <span class="font-mono text-xl font-bold text-white">{(index + 1).toString().padStart(3, '0')}</span>
      </div>
      
      <div class="flex flex-col mt-4 md:mt-0">
        <span class="font-mono text-[10px] text-white/40 uppercase tracking-widest mb-1">Date</span>
        <time class="font-mono text-xs text-green-400">
          {data.pubDate.toISOString().split('T')[0]}
        </time>
      </div>
    </div>

    <!-- Content Column -->
    <div class="p-6 relative overflow-hidden">
      <!-- Title -->
      <h3 class="text-xl md:text-2xl font-bold uppercase tracking-tight mb-3 group-hover:text-white transition-colors">
        {data.title}
      </h3>
      
      <!-- Desc -->
      <p class="font-mono text-sm text-muted-foreground line-clamp-2 mb-4 max-w-xl">
        {data.description}
      </p>

      <!-- Footer Tags -->
      <div class="flex items-center gap-4 mt-auto">
        <div class="inline-flex items-center gap-2 px-2 py-1 border border-white/10 bg-black/20 text-[10px] font-mono uppercase text-white/60">
           <Icon name="tabler:file-text" class="w-3 h-3" />
           <span>MDX</span>
        </div>
        <div class="inline-flex items-center gap-2 px-2 py-1 border border-white/10 bg-black/20 text-[10px] font-mono uppercase text-white/60">
           <span>Read Time: Auto</span>
        </div>
        
        <!-- Hover Arrow -->
        <div class="ml-auto opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all duration-300">
           <Icon name="tabler:arrow-right" class="w-5 h-5 text-green-400" />
        </div>
      </div>
    </div>

  </div>
</a>