---
import '~/styles/global.css';

import ExperienceTimeline from '~/components/ExperienceTimeline.astro';
import Hero from '~/components/HomeHero.astro';
import ProjectGrid from '~/components/ProjectGrid.astro';
import { Sparkles } from '~/components/react/sparkle';
import SkillGrid from '~/components/SkillGrid.astro';
import MainLayout from '~/layouts/Main.astro';

import { GITHUB_TOKEN } from "astro:env/server";
import { InteractiveBadge } from '~/components/react/interactive-badge';

// Define the skills array
const skills = [
  { name: 'TypeScript', icon: 'logos:typescript-icon' },
  { name: 'JavaScript', icon: 'logos:javascript' },
  { name: 'React', icon: 'logos:react' },
  { name: 'Astro', icon: 'logos:astro-icon' },
  { name: 'Tailwind CSS', icon: 'logos:tailwindcss-icon' },
  { name: 'Next.js', icon: 'logos:nextjs-icon' },
  { name: 'Node.js', icon: 'logos:nodejs-icon' },
  { name: 'Rust', icon: 'logos:rust' }
];

// Define experience data
const experiences = [
  {
    title: 'Software Developer',
    organization: 'ABC Tech',
    period: 'Jan 2023 - Present',
    description: 'Developing modern web applications using React, TypeScript, and Next.js. Contributing to open-source projects and implementing CI/CD pipelines.',
    tags: ['React', 'TypeScript', 'Next.js', 'CI/CD']
  },
  {
    title: 'Frontend Developer Intern',
    organization: 'XYZ Company',
    period: 'Jun 2022 - Dec 2022',
    description: 'Built responsive interfaces and implemented UI components using modern JavaScript frameworks. Optimized application performance and collaborated with UX designers.',
    tags: ['JavaScript', 'React', 'Tailwind CSS']
  },
  {
    title: 'Computer Science Student',
    organization: 'University of Technology',
    period: '2020 - 2023',
    description: 'Studied advanced algorithms, software architecture, and full-stack development. Participated in coding competitions and led student projects.',
    tags: ['Algorithms', 'Software Design', 'Full-stack']
  }
];

// Fetch GitHub projects data
const username = 'hadronomy';
const response = await fetch(
  `https://api.github.com/users/${username}/repos?sort=updated&per_page=6`, 
  { headers: { Authorization: `Bearer ${GITHUB_TOKEN}` } },
);
const projects = await response.json();
---

<MainLayout>
  <div class="h-30 animate-fade-in"></div>
  <main class="flex gap-y-10 flex-col">
    <Hero id="hero" />
    <section>
      <a href="#skills">
        <Sparkles client:load>
          <h2 id="skills" class="text-3xl uppercase tracking-widest scroll-m-20">Skills</h2>
        </Sparkles>
      </a>
      <SkillGrid skills={skills} />
    </section>
    <section>
      <a href="#projects">
        <Sparkles client:load>
          <h2 id="projects" class="text-3xl uppercase tracking-widest scroll-m-20">Projects</h2>
        </Sparkles>
      </a>
      <ProjectGrid projects={projects} />
    </section>
    <section>
      <a href="#experience">
        <Sparkles client:load>
          <h2 id="experience" class="text-3xl uppercase tracking-widest scroll-m-20">Experience</h2>
        </Sparkles>
      </a>
      <div class="w-full mt-4">
        <ExperienceTimeline items={experiences} />
      </div>
    </section>
    <div class="inline-flex flex-col">
      <hr class="w-full h-0 mb-0"/>
      <aside class="w-full h-90 hidden md:flex align-middle justify-center items-center">
        <InteractiveBadge client:load />
      </aside>
    </div>
  </main>
</MainLayout>
